<!-- Mobile Sliders -->
<div class="md:hidden">
  <div class="relative w-full overflow-hidden" data-aos="fade-in">
    <!-- Carousel Container -->
    <div class="flex transition-transform duration-500 ease-in-out" id="carousel-mobile">
      {% for slider in mobile_sliders reversed %}
        <img src="{{ slider.image.url }}" alt="Mobile Slider {{ forloop.counter }}" onclick="location.href='{{slider.url}}'" class="w-full flex-shrink-0"
        {% if forloop.first %}loading="eager"{% else %}loading="lazy"{% endif %} height="20%" />
      {% endfor %}
    </div>

    <!-- Navigation Buttons -->
    <button id="prev-mobile" class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white px-1"
      aria-label="Previous Slide">
      &#10094;
    </button>
    <button id="next-mobile" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white px-1"
      aria-label="Next Slide">
      &#10095;
    </button>

    <!-- Search Container -->
    <div class="absolute top-20 left-1/2 transform -translate-x-1/2 w-full">
      <div class="relative mt-4 px-4">
        <div class="relative w-full">
          <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" height="24" width="24"
              aria-hidden="true">
              <path fill="#FFFFFF"
                d="M9.45 15.775c-1.80265 0 -3.32835 -0.625 -4.577 -1.875C3.624335 12.65 3 11.14165 3 9.375c0 -1.7667 0.625 -3.275 1.875 -4.525025 1.25 -1.25 2.7625 -1.875 4.5375 -1.875 1.775 0 3.28335 0.625 4.525 1.875C15.17915 6.1 15.8 7.60955 15.8 9.37875c0 0.71415 -0.11665 1.40455 -0.35 2.07125 -0.23335 0.66665 -0.58335 1.29165 -1.05 1.875l6.05 6c0.15 0.14265 0.225 0.32415 0.225 0.5445 0 0.2203 -0.075 0.4055 -0.225 0.5555 -0.15 0.15 -0.33515 0.225 -0.5555 0.225s-0.40185 -0.075 -0.5445 -0.225L13.325 14.4c-0.5 0.4333 -1.083 0.7708 -1.749 1.0125 -0.666 0.24165 -1.37465 0.3625 -2.126 0.3625Zm-0.025 -1.5c1.35415 0 2.50525 -0.4792 3.45325 -1.4375C13.8261 11.87915 14.3 10.725 14.3 9.375s-0.4739 -2.5042 -1.42175 -3.4625c-0.948 -0.95836 -2.0991 -1.437525 -3.45325 -1.437525 -1.368 0 -2.53085 0.479165 -3.4885 1.437525C4.978835 6.8708 4.5 8.025 4.5 9.375s0.478835 2.50415 1.4365 3.4625c0.95765 0.9583 2.1205 1.4375 3.4885 1.4375Z"
                stroke-width="0.5"></path>
            </svg>
          </span>
          <input type="text" placeholder='Search "What you love !"' onclick="location.href='/store/search'"
            class="w-full bg-transparent border border-white text-white py-2 pl-14 pr-4 focus:outline-none placeholder-white"
            aria-label="Search Input" />
        </div>
      </div>
    </div>

    <!-- Dots Container -->
    <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2" id="dots-mobile">
      {% for slider in mobile_sliders %}
      <span class="dot w-1 h-1 rounded-full bg-gray-400 cursor-pointer" aria-label="Slide {{ forloop.counter }}"></span>
      {% endfor %}
    </div>
  </div>
</div>

<!-- Desktop Sliders -->
<div class="hidden md:block my-10">
  <div class="relative w-full overflow-hidden" data-aos="fade-in">
    <!-- Carousel Container -->
    <div class="flex transition-transform duration-500 ease-in-out" id="carousel-desktop">
      {% for slider in desktop_sliders %}
      <img src="{{ slider.image.url }}" alt="Desktop Slider {{ forloop.counter }}" class="w-full flex-shrink-0" onclick="location.href='{{slider.url}}'"
        loading="lazy" />
      {% endfor %}
    </div>

    <!-- Navigation Buttons -->
    <button id="prev-desktop" class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white px-1"
      aria-label="Previous Slide">
      &#10094;
    </button>
    <button id="next-desktop" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white px-1"
      aria-label="Next Slide">
      &#10095;
    </button>

    <!-- Dots Container -->
    <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2" id="dots-desktop">
      {% for slider in desktop_sliders %}
      <span class="dot w-1 h-1 rounded-full bg-gray-400 cursor-pointer" aria-label="Slide {{ forloop.counter }}"></span>
      {% endfor %}
    </div>
  </div>
</div>
<marquee behavior="" direction="" class="bg-black md:hidden">
  <div class="animate-marquee whitespace-nowrap flex items-center">
    <span class="py-1 text-xs font-semibold text-gray-700">
      {{settings.slider_news|safe}}
    </span>
  </div>
</marquee>

<!-- JavaScript for Carousel -->
<script>
  const intervalTime = 3000; // Auto-slide interval in milliseconds

  // Initialize Carousel Function
  function initializeCarousel(carouselId, dotsId, prevButtonId, nextButtonId) {
    const carousel = document.getElementById(carouselId);
    const images = carousel.children;
    const dots = document.querySelectorAll(`#${dotsId} .dot`);
    let index = 0;
    let autoSlide;

    // Update Dots
    function updateDots() {
      dots.forEach((dot, i) => {
        dot.classList.toggle('bg-black', i === index);
        dot.classList.toggle('bg-gray-400', i !== index);
      });
    }

    // Next Slide
    function nextSlide() {
      index = (index + 1) % images.length;
      carousel.style.transform = `translateX(-${index * 100}%)`;
      updateDots();
    }

    // Previous Slide
    function prevSlide() {
      index = (index - 1 + images.length) % images.length;
      carousel.style.transform = `translateX(-${index * 100}%)`;
      updateDots();
    }

    // Start Auto Slide
    function startAutoSlide() {
      autoSlide = setInterval(nextSlide, intervalTime);
    }

    // Reset Auto Slide
    function resetAutoSlide() {
      clearInterval(autoSlide);
      startAutoSlide();
    }

    // Event Listeners
    document.getElementById(prevButtonId).addEventListener('click', () => {
      prevSlide();
      resetAutoSlide();
    });

    document.getElementById(nextButtonId).addEventListener('click', () => {
      nextSlide();
      resetAutoSlide();
    });

    dots.forEach((dot, i) => {
      dot.addEventListener('click', () => {
        index = i;
        carousel.style.transform = `translateX(-${index * 100}%)`;
        updateDots();
        resetAutoSlide();
      });
    });

    // Pause on Hover
    carousel.addEventListener('mouseenter', () => clearInterval(autoSlide));
    carousel.addEventListener('mouseleave', startAutoSlide);

    // Initialize
    updateDots();
    startAutoSlide();
  }

  // Initialize Mobile and Desktop Carousels
  initializeCarousel('carousel-mobile', 'dots-mobile', 'prev-mobile', 'next-mobile');
  initializeCarousel('carousel-desktop', 'dots-desktop', 'prev-desktop', 'next-desktop');
</script>